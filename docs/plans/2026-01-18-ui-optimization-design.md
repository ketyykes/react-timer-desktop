# UI/UX 優化設計文件

日期：2026-01-18

## 設計目標

- **操作效率**：所有功能一目了然，不需要捲動
- **視覺一致性**：簡潔介面，無捲軸
- **符合 Menu Bar App 情境**：popover 用於快速操作，深度功能另開視窗

---

## 整體佈局

```
┌─────────────────────────────┐
│      計時器區塊 (75%)        │
│                             │
│         00:00               │
│     [任務描述輸入]           │
│   [5分][10分][25分][45分]    │
│      [↓倒數]  [開始]        │
│                             │
├─────────────────────────────┤
│      今日記錄 (25%)          │
│  任務列表 (最多3筆) [查看全部]│
└─────────────────────────────┘
```

### 空間分配
- 計時器區塊：75% 高度（核心功能）
- 今日記錄：25% 高度（輔助資訊）

### 視覺分隔
- 兩區塊用細線或微妙背景色差區分
- 今日記錄區塊稍微內縮 padding

---

## 計時器區塊

### Idle 狀態

```
┌─────────────────────────────┐
│                             │
│          00:00              │  ← 點擊可直接輸入時間
│                             │
│  ┌───────────────────────┐  │
│  │ 這次要做什麼？         │  │  ← 任務描述輸入框
│  └───────────────────────┘  │
│                             │
│  ┌────┐┌────┐┌────┐┌────┐  │
│  │ 5分││10分││25分││45分│  │  ← 點擊直接開始
│  └────┘└────┘└────┘└────┘  │
│                             │
│      [↓倒數]  [開始]        │
└─────────────────────────────┘
```

**關鍵設計**：
1. **時間顯示即輸入** — 點擊 `00:00` 直接變成輸入模式
2. **預設按鈕 4 個** — 縮小尺寸，一行排列
3. **預設按鈕點擊直接開始** — 減少一步操作
4. **模式切換** — 小型 toggle，預設倒數

**操作流程**：
- 快速啟動：填任務 → 點預設按鈕 → 直接開始
- 自訂時間：點時間 → 輸入 → 按開始

### Running / Paused 狀態

```
┌─────────────────────────────┐
│                             │
│          12:34              │
│                             │
│      「撰寫報告」            │  ← 任務描述（唯讀）
│                             │
│    [暫停]      [停止]       │
└─────────────────────────────┘
```

**設計重點**：
1. 極簡化 — 只保留必要資訊
2. 任務描述唯讀顯示
3. 控制按鈕放大，易於點擊
4. Paused：「暫停」→「繼續」
5. Overtime：時間變紅，顯示 `+01:23`

---

## 今日記錄區塊

```
┌─────────────────────────────┐
│  今日  ──────────  [查看全部] │
│                             │
│  ┌─────────────────────────┐│
│  │ 撰寫報告   25:00  10:32 ✕││
│  ├─────────────────────────┤│
│  │ 回覆郵件   15:00  09:15 ✕││
│  ├─────────────────────────┤│
│  │ 晨間規劃    5:00  08:30 ✕││
│  └─────────────────────────┘│
└─────────────────────────────┘
```

### 設計重點
1. **最多顯示 3 筆** — 超過則顯示最近 3 筆
2. **緊湊列表樣式** — 每筆一行
3. **資訊精簡** — 任務名稱、設定時間、完成時間點
4. **可編輯** — 點擊任務名稱可編輯
5. **可刪除** — 點擊 ✕ 後需確認

### 刪除確認機制

```
點擊 ✕ 後：
┌─────────────────────────────┐
│  │ 撰寫報告   [取消] [確認刪除]│
└─────────────────────────────┘
```

- Inline 確認，不用 modal
- 點擊「取消」或其他地方恢復正常

### 空狀態

```
│  今日  ──────────  [查看全部] │
│                             │
│     今天還沒有完成任務        │
└─────────────────────────────┘
```

---

## 完整歷史視窗

點擊「查看全部」開啟獨立視窗：

```
┌───────────────────────────────────────┐
│  歷史記錄                        [✕]  │
├───────────────────────────────────────┤
│                                       │
│  ▼ 今天 (3)                           │
│  ┌─────────────────────────────────┐  │
│  │ 撰寫報告       25:00     10:32  │✎✕│
│  │ 回覆郵件       15:00     09:15  │✎✕│
│  │ 晨間規劃        5:00     08:30  │✎✕│
│  └─────────────────────────────────┘  │
│                                       │
│  ▶ 昨天 (5)                           │
│  ▶ 1月15日 (2)                        │
│  ▶ 1月14日 (4)                        │
│                                       │
└───────────────────────────────────────┘
```

### 設計重點
1. **按日期分組** — 可展開/收合
2. **預設展開「今天」**
3. **完整功能** — 編輯和刪除（刪除需確認）
4. **獨立視窗** — 可用捲軸瀏覽
5. **統計資訊** — 日期旁顯示任務數量

---

## 檔案變更清單

### 修改檔案
| 檔案 | 變更內容 |
|------|----------|
| `App.tsx` | 移除 Tabs，整合新佈局 |
| `Timer.tsx` | 重構 idle 狀態邏輯 |
| `TimerDisplay.tsx` | 新增點擊編輯時間功能 |
| `PresetButtons.tsx` | 縮小按鈕、一行排列、點擊直接開始 |
| `TaskHistory.tsx` | 改為今日記錄，限制 3 筆 |

### 新增檔案
| 檔案 | 說明 |
|------|------|
| `TodayTasks.tsx` | 今日記錄區塊元件 |
| `main/historyWindow.ts` | 歷史記錄獨立視窗管理 |
| `renderer/src/pages/History.tsx` | 完整歷史視窗頁面 |

### 可移除檔案
| 檔案 | 原因 |
|------|------|
| `TimeInput.tsx` | 功能整合至 TimerDisplay |
| `ModeSelector.tsx` | 簡化為 inline toggle |

---

## 技術考量

### Electron 新視窗
- 使用 `BrowserWindow` 開啟歷史視窗
- IPC channel：`history:open`
- 視窗大小：約 400x500px

### 狀態管理
- 今日記錄過濾邏輯移至 renderer
- 任務編輯需新增 IPC：`task:update`
